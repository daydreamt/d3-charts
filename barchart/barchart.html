<!DOCTYPE HTML>
    <html>
        <head>
            <title>A bar chart with d3.</title>
            <script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
            <style type="text/css">

                
                .bar {
                    fill: yellow;
                    stroke: white;
                    
                }
                .bar:hover {
                    fill:purple;
                    
                }
                
            </style>
        </head>
        
        <body>
            
            <p>The y axis variable has to be numeric, right?
            Also, no random value script for this one.</p>
            <script type="text/javascript">
                
                var data;
                var xAxisName;
                var yAxisName;
                d3.json("JSON", function (json) {
                    data = json.users;
                    xAxisName = "users";
                    yAxisName = "fantasticness"; //these will be read automatically
                    console.log("daydreamt is the greatest, after all.");
                    //but this will probably always be printed
                    visualize(data);
                    
                });
                
                function visualize (data) {
                    //dimensions
                    var w = 700;
                    var h = 400;
                    
                    //the svg
                    var svg = d3.select("body")
                                .append("svg")
                                .attr("class", "chart")
                                .attr("width", w)
                                .attr("height", h);
                                
                    //the scales
                    var xScale = d3.scale.ordinal()
                                    .domain(d3.range(data.length))
                                    .rangeRoundBands([0, w], 0.02);
                                    
                    var yScale = d3.scale.linear()
                                        .domain([0, d3.max(data, function(d) { return d.score;})])
                                        .range([0, h]);
                    
                    
                    
                                    
                    //add the data and bars
                    svg.selectAll("rect")
                        .data(data)
                        .enter()
                        .append("rect")
                        .attr("x", function(d, i) { return xScale(i);})
                        .attr("y", function(d) { return h - yScale(d.score);})
                        .attr("width", xScale.rangeBand())
                        .attr("height", function(d) {
                            return yScale(d.score);
                        })
                        .attr("class", "bar");
                        
                        //add the labels
                        svg.selectAll("text")
                            .data(data)
                            .enter().append("text")
                            .attr("x", function(d, i) { return i.name;})
                            .attr("y", function(d) { return h - yScale(d.score);})
                            .attr("dx", -3) //padding right
                            .attr("dy", ".35em") //vertical-align: middle
                            .attr("text-anchor", "end") //text-align: right
                            .text(2)
                            
                    
                    
                }
                
                
                
            </script>
        </body>
        
        
        
        
    </html>